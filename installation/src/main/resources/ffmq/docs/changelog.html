<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
	    <title>FFMQ - Full-Java, native JMS 1.1, lightweight and fast message queuer</title>
		<link rel="stylesheet" type="text/css" href="style.css"/>
	</head>
	<body>
		<table class="header">
			<tr>
				<td><img src="ffmq.gif"/></td>
				<td><p class="navbar">
                                    <a href="http://sourceforge.net">
                                      <img src="http://sflogo.sourceforge.net/sflogo.php?group_id=236128&amp;type=5" width="210" height="62" border="0" alt="SourceForge.net Logo" />
                                    </a><br/>
<a href="index.html">Main</a> | <a href="doc.html">Documentation</a> | <a href="faq.html">FAQ</a> | ChangeLog | <a href="performance.html">Performance</a> | <a href="technical_overview.html">Technical Overview</a> | <a href="http://sourceforge.net/project/showfiles.php?group_id=236128">Downloads</a> | <a href="http://sourceforge.net/tracker/?group_id=236128&atid=1099055">Bugs</a></p></td>
			</tr>
		</table>
		
		<h1>ChangeLog</h1>

        <h2>3.0.5</h2>
		<ul>
			<li><b>[Fix]</b> Fix getStoreUsage() returning an invalid percentage for persistent stores</li>
		</ul>

        <h2>3.0.4</h2>
		<ul>
			<li><b>[Fix]</b> Fix listener JMX domain</li>
		</ul>

        <h2>3.0.3</h2>
		<ul>
			<li><b>[Feature]</b> JMX : also serve plateform MBeans when available</li>
			<li><b>[Fix]</b> Java 1.4 runtime compatibility was broken in several places !</li>
		</ul>

		<h2>3.0.2</h2>
		<ul>
			<li><b>[Fix]</b> Make sure UUIDProvider does not crash on startup if the localhost address is not available<br/>
			for whatever reason (no available network interface or misconfigured hostname).</li>
		</ul>

		<h2>3.0.1</h2>
		<ul>
			<li><b>[Fix]</b> Transport endpoint : make sure we do not recycle an old response if the transport is concurrently closed.<br/>
			  This fixes a race condition were a commit could return successfully although no acknowledge was received.</li>
		</ul>

		<h2>3.0.0</h2>
		<ul>
		    <li><b>[Feature]</b> New remote admin command : purgeQueue</li>
			<li><b>[Feature]</b> New configurable topic subscriber policy feature in case of subscriber failure or queue full. (See 'subscriberFailurePolicy' and 'subscriberOverflowPolicy' topic properties)</li>
			<li><b>[Feature]</b> Support for network interface address auto-discovery using special notation 'auto:eth0' for example</li>
			<li><b>[Feature]</b> More JMX support : expired message count, store usage</li>
			<li><b>[Fix]</b> Fixed SentToQueueCount counter behavior</li>
			<li><b>[Fix]</b> Various cleanups and tunings</li>
		</ul>

		<h2>3.0.0-rc8</h2>
		<ul>
			<li><b>[Feature]</b> Disabled automatic overflow to persistent store by default (not a JMS compliant feature : breaks message ordering). Added new setting to re-enable it.</li>
		</ul>

		<h2>3.0.0-rc7</h2>
		<ul>
			<li><b>[Feature]</b> Added some javabean properties to connection factories to improve usability in third-party JMS tools.</li>
			<li><b>[Fix]</b>Fixed BytesMessage reset() only working the first time.</li>
		</ul>
		
		<h2>3.0.0-rc6</h2>
		<ul>
			<li><b>[Feature]</b> Feature to auto-retry message put if remote queue is full</li>
		    <li><b>[Fix]</b> Do not clear pending messages if commit fails</li>
		    <li><b>[Fix]</b> Fixed invalid read/write lock usage</li>
		</ul>

		<h2>3.0.0-rc5</h2>
		<ul>
			<li><b>[Feature]</b> Tuned message serialization (changed protocol version)</li>
			<li><b>[Feature]</b> Journal files recycling</li>
			<li><b>[Feature]</b> Auto prune unnecessary journal operations to improve performance</li>
			<li><b>[Feature]</b> Even more JMX</li>
		    <li><b>[Fix]</b> Synchronized message stores random access files more to avoid subtle concurrency bugs</li>
		    <li><b>[Fix]</b> Reworked destination locking during commit/rollback operations</li>
		</ul>

		<h2>3.0.0-rc4</h2>
		<ul>
		    <li><b>[Feature]</b> More JMX support</li>
			<li><b>[Feature]</b> Turned off journal files pre-allocation by default (this was a bit agressive for common use-cases)</li>
			<li><b>[Feature]</b> More documentation</li>
			<li><b>[Fix]</b> Fixed ping responses being filtered out, causing client timeouts when idle</li>
			<li><b>[Fix]</b> Made endpoints more re-active on connection close</li>
			<li><b>[Fix]</b> Various cleanups</li>
		</ul>

		<h2>3.0.0-rc3</h2>
		<ul>
			<li><b>[Feature]</b> Improved journaling store write concurrency</li>
			<li><b>[Feature]</b> Lazily create journal files on first write</li>
			<li><b>[Feature]</b> Added setting to choose the disk sync method (defaults to channel.force(false))</li>
			<li><b>[Feature]</b> Journal files are now pre-allocated by default to improve performance</li>
			<li><b>[Fix]</b> Messages received through local listeners were not properly de-serialized</li>
			<li><b>[Fix]</b> Removing a message from store could corrupt the priority table</li>
			<li><b>[Fix]</b> Shutdown on SIGINT was not properly waiting for the engine to stop, causing full recovery on next startup</li>
		</ul>

		<h2>3.0.0-rc2</h2>
		<ul>
			<li><b>[Feature]</b> Reworked the internal notification pipeline to improve throughput</li>
			<li><b>[Feature]</b> Do not reply to async network requests to save bandwidth</li>
			<li><b>[Feature]</b> Improved remote client prefetching</li>
			<li><b>[Feature]</b> Lot of cleanups</li>
			<li><b>[Feature]</b> New synchronization architecture to handle concurrent closing of resources</li>
			<li><b>[Fix]</b> Reworked transaction boundaries : make sure everything is synced before
			     waking up consumers</li>
			<li><b>[Fix]</b> Correctly re-acquire durable subscriptions (preventing a subscription leak).</li>
		</ul>

		<h2>3.0.0-rc1</h2>
		<ul>
			<li><b>[Feature]</b> Lot of performance tunings</li>
			<li><b>[Feature]</b> Rewrote the persistence layer (journal-based, asynchronous)</li>
			<li><b>[Feature]</b> Asynchronous acknowledgment of delivered messages</li>
			<li><b>[Feature]</b> Improved architecture, easier to embed</li>
		</ul>

		<hr/>

		<h2>2.1.4</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed BytesMessage reset() only working the first time.
            </li>
			<li><b>[Fix]</b>
				Fixed a bug in datastore delete() that could lead to index corruption for
				certain message and block sizes.
            </li>
		</ul>
		
		<h2>2.1.3</h2>
		<ul>
			<li><b>[Fix]</b>
				Correctly re-acquire durable subscriptions (preventing a subscription leak).
            </li>
			<li><b>[Fix]</b>
				Changed default max message size (was too low for a default value).
            </li>
		</ul>

		<h2>2.1.2</h2>
		<ul>
		    <li><b>[Fix]</b>
				Fixed CopyOnWriteList synchronization (could crash under heavy consumer re-connect load).
            </li>
            <li><b>[Fix]</b>
				Fixed a race condition in the session updated queues list that would cause some messages not to be properly committed
                in some situations.
            </li>
            <li><b>[Fix]</b>
				Fixed some cases where an exception could abort an object close() too early
            </li>
            <li><b>[Fix]</b>
				In-memory datastore had a different behavior from the persistent one when full.
            </li>
            <li><b>[Fix]</b>
				If a volatile message was persisted bceause the in-memory datastore is full, the persistent store would not be properly synced.
            </li>
            <li><b>[Fix]</b>
				Fixed a race-condition in the consumer round-robin dispatch algorithm that would cause starvation in some situations.
            </li>
            <li><b>[Fix]</b>
				Fixed fairness of the consumer round-robin dispatch algorithm under heavy load.
            </li>
            <li><b>[Fix]</b>
				Do not try to forward messages to consumers on a stopped connection.
            </li>
		</ul>

		<h2>2.1.1</h2>
		<ul>
		    <li><b>[Fix]</b>
				Reworked locking in various places to fix concurrency issues
            </li>
            <li><b>[Fix]</b>
				Workaround an issue with NIO and socket options on some platforms
            </li>
            <li><b>[Feature]</b>
				Improved queue creation speed for volatile and/or temporary queues.
            </li>
		</ul>

        <h2>2.1.0</h2>
		<ul>
		    <li><b>[Fix]</b>
				API cleanups, more javadoc.
            </li>
			<li><b>[Fix]</b>
				Fixed various possible deadlocks when closing resources concurrently.
            </li>
            <li><b>[Fix]</b>
				Increased default asynchronous queue max size.
            </li>
		</ul>

		<h2>2.0.12</h2>
		<ul>
			<li><b>[Feature]</b>
				Support for a redelivery delay after rollback.
				(See deliver.redeliverDelay setting)
            </li>
            <li><b>[Fix]</b>
				Some JMS specification compliance fixes.
            </li>
		</ul>

		<h2>2.0.11</h2>
		<ul>
			<li><b>[Feature]</b>
				Drop clients that did not create a first session quickly enough. (Improves server robustness regarding buggy clients)
            </li>
		</ul>

		<h2>2.0.10</h2>
		<ul>
			<li><b>[Feature]</b>
				Display listener's clients in JMX.
            </li>
			<li><b>[Fix]</b>
				Reverted 2.0.9 change. Did not work with generic JMX consoles.
            </li>
            <li><b>[Fix]</b>
				Reworked transaction demarcation : prefetching did not work well with multiple session consumers. 
            </li>
            <li><b>[Fix]</b>
            	Improved deferred file deletion to workaround JVM limitations with memory mapped files.
            </li>
		</ul>

		<h2>2.0.9</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed an issue with JMX over RMI on localhost that prevented clients to connect.
            </li>
		</ul>

		<h2>2.0.8</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed rollback issue when persistent storage is disabled.
            </li>
		</ul>

		<h2>2.0.7</h2>
		<ul>
			<li><b>[Security]</b>
				Made the server more robust regarding rogue connections stalled before authentication.
            </li>
             <li><b>[Feature]</b>
				Support for tcp listener limit : do no accept more connections than specified by the listener capacity. 
            </li>
            <li><b>[Fix]</b>
				Made client properly close its connection when authentication fails.
            </li>
			<li><b>[Fix]</b>
				Fixed spurious exception when a connection is auto-closed by garbage collection.
            </li>
		</ul>

		<h2>2.0.6</h2>
		<ul>
			<li><b>[Fix]</b>
				Context.SECURITY_PRINCIPAL and Context.SECURITY_CREDENTIALS were not taken into account when set in JDNI context.
            </li>
            <li><b>[Fix]</b>
				Do not enforce initial packet size restriction on the client side. This was swallowing error messages returned by the server.
            </li>
		</ul>

		<h2>2.0.5</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed StreamMessage still read-only after calling clearBody().
				Allow null objects to be stored in StreamMessage.
				Fixed ObjectMessage not being read-only upon reception.
            </li>
			<li><b>[Fix]</b>
				Fixed int to long conversion in queue size/offset computation that would overflow
				very large queues.
            </li>
            <li><b>[Fix]</b>
				Fixed exception handling in NIO Tcp multiplexer initialization.
            </li>
            <li><b>[Fix]</b>
            	Made async processor threads daemon so they don't block server or client JVM exit
            </li>
            <li><b>[Feature]</b>
				Use shorter UUIDs for producer/consumers to save some bandwidth.
            </li>
            <li><b>[Feature]</b>
				Fallback to persistent store if possible when a volatile store is full.
            </li>
		</ul>

		<h2>2.0.4</h2>
		<ul>
			<li><b>[Security]</b>
				Made the server more robust regarding invalid protocol packets
            </li>
        </ul>
        
		<h2>2.0.3</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed possible deadlock in activity watchdog
            </li>
        </ul>
            
		<h2>2.0.2</h2>
		<ul>
			<li><b>[Fix]</b>
				ByteMessage implementation was broken
            </li>
            <li><b>[Fix]</b>
				Made the server shutdown script more portable (Thanks Nick)
            </li>
            <li><b>[Fix]</b>
				Rare deadlock when closing a connection while the watchdog is active
            </li>
            <li><b>[Fix]</b>
				Fixed possible deadlock when stopping a JMS Bridge
            </li>
            <li><b>[Fix]</b>
				Auto-close connection on transport failure
            </li>
		</ul>
		
		<h2>2.0.1</h2>
		<ul>
            <li><b>[Fix]</b>
				Fixed crash when remotely deleting a temporary queue or topic
            </li>
            <li><b>[Fix]</b>
				Fix issue with temporary topic name being too long
            </li>
        </ul>
        
		<h2>2.0.0</h2>
		<ul>
			<li><b>[Feature]</b>
				New message-push architecture for remote consumers with even-better latency
			</li>
			<li><b>[Feature]</b>
				Reworked the asynchronous dispatch system for better scalability with increasing number of consumers
			</li>
			<li><b>[Feature]</b>
				Use NIO memory map features to improve performance
			</li>
			<li><b>[Feature]</b>
				New optional NIO based packet transport option with improved scalability.
				Available both on the server and client-side.
			</li>
			<li><b>[Feature]</b>
				JMS Bridging support
			</li>
			<li><b>[Feature]</b>
				Messages prefetching features for remote listeners to improve throughput
			</li>
			<li><b>[Feature]</b>
				Reworked the JMX model.
			</li>
			<li><b>[Feature]</b>
				Ping timeout support on remote connections to detect stalled consumers
			</li>
			<li><b>[Fix]</b>
				Fixed a race condition in remote connection start
			</li>
			<li><b>[Fix]</b>
				Do not dispatch messages if connection is not started
			</li>
			<li><b>[Fix]</b>
				Fixed a socket leak on client disconnect
			</li>
			<li><b>[Fix]</b>
				Issues with complex message selectors
			</li>
			<li><b>[Fix]</b>
				Support for JMSRedelivered flag
			</li>
			<li><b>[Fix]</b>
				Various small cleanups and specification compliance fixes
			</li>
		</ul>
		
		<hr/>
		
		<h2>1.2.5</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed various bugs with messages priority that caused persisted messages priority to get messed up when the queuer was restarted,
				and other invalid ordering behaviors
            </li>
            <li><b>[Fix]</b>
				Report network errors to exception listeners so they have a chance to reconnect
            </li>
            <li><b>[Fix]</b>
				Don't allow multiple templates with the same name
            </li>
            <li><b>[Fix]</b>
				Trim values in properties files to avoid issues with white space in config. values
            </li>
            <li><b>[Fix]</b>
				Better server behavior regarding stalled remote consumers
            </li>
            <li><b>[Feature]</b>
				Reworked all thrown JMS exceptions : they now contain an error code
			</li>
			<li><b>[Feature]</b>
				Added a shutdown hook to allow for graceful server shutdown on SIGINT/SIGTERM
			</li>
		</ul>

		<h2>1.2.4</h2>
		<ul>
			<li><b>[Fix]</b>
				Fixed a bug causing the queue store to be corrupted when the queue is almost full and you put a message that won't fit
			</li>
		</ul>

		<h2>1.2.3</h2>
		<ul>
			<li><b>[Fix]</b>
				Take FFMQ_BASE system property into account when looking for a default config file
			</li>
		</ul>
		
		<h2>1.2.2</h2>
		<ul>
			<li><b>[Feature]</b>
				Added support for FFMQ_HOME and FFMQ_BASE system properties to spawn multiple server instances using the same installation
			</li>
			<li><b>[Feature]</b>
				Added support for system property replacement in settings and descriptor files
			</li>
		</ul>
		
		<h2>1.2.1</h2>
		<ul>
			<li><b>[Fix]</b>
				(JMX) Enforce use of 'management.jmx.agent.rmi.listenAddr' for exported MBean servers too
				(was only used for the RMI registry)
			</li>
			<li><b>[Fix]</b>
				(JMX) Added a workaround to close the MBeans RMI sockets when shutting down the JMX agent
			</li>
			<li><b>[Fix]</b>
				Do not synchronize on client-provided message listeners to avoid possible deadlocks with
				external code.
			</li>
			<li><b>[Fix]</b>
				Fixed localTopicExists() returning invalid values (thanks to <i>snappyh</i>)
			</li>
			<li><b>[Fix]</b>
				Purge administrative queues before starting the remote administration agent
			</li>
			<li><b>[Fix]</b>
				Fix the admin client so it doesn't wait for a server reply when issuing a shutdown command
			</li>
			<li><b>[Fix]</b>
				The purge() method on a LocalQueue no longer removes locked message to avoid concurrency issues
			</li>
			<li><b>[Fix]</b>
				mx4j is now an optional runtime dependency
			</li>
		</ul>

		<h2>1.2.0</h2>
		<ul>
			<li><b>[Feature]</b>
				Support for asynchronous delivery of notifications to MessageListeners using a thread pool.
				Slow message listeners no longer hang the whole server.
			</li>
			<li><b>[Fix]</b>
			  Detect unsupported delivery mode earlier when sending on a topic.
			</li>
			<li><b>[Fix]</b>
			  Destroying a temporary queue did not clear the associated pending changes in the current
              transaction, thus causing store exceptions on the next commit/rollback operation.
			</li>
			<li><b>[Fix]</b>
			  Temporary queues cleanup failed if lock files were present.
			  Lock files are also deleted now.
			</li>
			<li><b>[Fix]</b>
			  Catch exceptions produced by invalid topic subscribers so they do not
              break the put operation.
			</li>
			<li><b>[Fix]</b>
			  JMS expiration was not taken into account. Expired messages are now lazily removed when reading or browsing a queue.
			</li>
			<li><b>[Fix]</b>
			  Redelivered flag is now correctly set on rollbacked messages. (It still does not survive a server shutdown, though)
			</li>
		</ul>

		<h2>1.1.0</h2>
		<ul>
			<li><b>[Feature]</b> 
			  Destinations can now be looked up in JNDI under the names :
              "queue/&lt;queueName&gt;" for queues and
              "topic/&lt;topicName&gt;" for topics.
            </li>
            <li><b>[Feature]</b>
            	Queue browsers are now implemented.
            </li>
            <li><b>[Feature]</b>
            	A new class allows for an easy integration in the spring framework :
            	net.timewalker.ffmq.spring.FFMQServerBean
            </li>
            <li><b>[Fix]</b>
            	Pending get operations were incorrectly associated to their consumers 
          instead of the parent session : closing a consumer would then 
          rollback all pending get operations for that consumer. 
          The consumer can now be closed independently of the session lifecycle.
            </li>
            <li><b>[Fix]</b>
            	Closing a remote consumer/producer would not close the associated 
          objects on the server-side, causing a temporary leak until the
          session was finally closed.
            </li>
		</ul>
		
		<h2>1.0.0</h2>
		<ul>
			<li>First release</li>
		</ul>
		
	</body>
</html>
